"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createAppPages = void 0;
const utils_1 = require("@vuepress/utils");
const page_1 = require("../page");
/**
 * Create pages for vuepress app
 */
const createAppPages = async (app) => {
    const pagePaths = await utils_1.globby(app.options.pagePatterns, {
        cwd: app.dir.source(),
    });
    // TODO
    // may need to limit the max parallel tasks
    // or change to serial tasks
    const pages = await Promise.all(pagePaths.map((filePath) => page_1.createPage(app, {
        filePath,
    })));
    // if there is no 404 page, add one
    if (!pages.some((page) => page.path === '/404.html')) {
        pages.push(await page_1.createPage(app, {
            path: '/404.html',
            frontmatter: {
                layout: '404',
            },
        }));
    }
    return pages;
};
exports.createAppPages = createAppPages;
//# sourceMappingURL=createAppPages.js.map