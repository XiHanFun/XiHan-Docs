"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createCodeHighlighter = void 0;
const Prism = require("prismjs");
const loadLanguages = require("prismjs/components/index");
const utils_1 = require("@vuepress/utils");
const log = utils_1.debug('vuepress:markdown/code');
/**
 * The docs of Prismjs says those default languages will be loaded
 * automatically, but it seems that we have to load them manually.
 *
 * @see https://prismjs.com/#basic-usage-node
 */
loadLanguages(['markup', 'css', 'clike', 'javascript']);
// eslint-disable-next-line no-import-assign
loadLanguages.silent = true;
const createCodeHighlighter = (lang) => {
    if (!Prism.languages[lang]) {
        try {
            loadLanguages([lang]);
        }
        catch (e) {
            log(`language '${lang}' is not supported by prismjs`);
        }
    }
    if (!Prism.languages[lang]) {
        return null;
    }
    return (code) => Prism.highlight(code, Prism.languages[lang], lang);
};
exports.createCodeHighlighter = createCodeHighlighter;
//# sourceMappingURL=codeHighlighter.js.map